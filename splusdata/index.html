
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.6">
    
    
      
        <title>Splusdata - splusdata</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#splusdata.connect" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="splusdata" class="md-header__button md-logo" aria-label="splusdata" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            splusdata
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Splusdata
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="splusdata" class="md-nav__button md-logo" aria-label="splusdata" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    splusdata
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Splusdata
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Splusdata
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#splusdata.connect" class="md-nav__link">
    splusdata.connect
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#splusdata.connect.connect" class="md-nav__link">
    connect
  </a>
  
    <nav class="md-nav" aria-label="connect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.checkcoords" class="md-nav__link">
    checkcoords()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_band_img" class="md-nav__link">
    get_band_img()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_cut" class="md-nav__link">
    get_cut()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_cut_weight" class="md-nav__link">
    get_cut_weight()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_field" class="md-nav__link">
    get_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_field_weight" class="md-nav__link">
    get_field_weight()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_img" class="md-nav__link">
    get_img()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_last_result" class="md-nav__link">
    get_last_result()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_tap_tables" class="md-nav__link">
    get_tap_tables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.query" class="md-nav__link">
    query()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.twelve_band_img" class="md-nav__link">
    twelve_band_img()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#splusdata.connect" class="md-nav__link">
    splusdata.connect
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#splusdata.connect.connect" class="md-nav__link">
    connect
  </a>
  
    <nav class="md-nav" aria-label="connect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.checkcoords" class="md-nav__link">
    checkcoords()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_band_img" class="md-nav__link">
    get_band_img()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_cut" class="md-nav__link">
    get_cut()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_cut_weight" class="md-nav__link">
    get_cut_weight()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_field" class="md-nav__link">
    get_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_field_weight" class="md-nav__link">
    get_field_weight()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_img" class="md-nav__link">
    get_img()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_last_result" class="md-nav__link">
    get_last_result()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.get_tap_tables" class="md-nav__link">
    get_tap_tables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.query" class="md-nav__link">
    query()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splusdata.connect.connect.twelve_band_img" class="md-nav__link">
    twelve_band_img()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Splusdata</h1>

<div class="doc doc-object doc-module">


<a id="splusdata.connect"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="splusdata.connect.connect" class="doc doc-heading">
        <code>connect</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Class that logs in into splus.cloud and perform all types of download operation.</p>


        <details class="quote">
          <summary>Source code in <code>splusdata/connect.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">connect</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class that logs in into splus.cloud and perform all types of download operation. </span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class may be initialized with splus.cloud user and password. If left in blanck, user and password will be asked on the runtime. </span>
<span class="sd">        Once logged in you may use all main tools from this class.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; conn = splusdata.connect(&#39;spcloud_user&#39;, &#39;password&#39;)</span>
<span class="sd">            You&#39;re connected.</span>
<span class="sd">            &gt;&gt;&gt; conn.get_cut(ra=0.1, dec=0.1, radius=100, band=&#39;R&#39;)</span>
<span class="sd">            [&lt;astropy.io.fits.hdu.image.PrimaryHDU object at 0x7f1bd283fe80&gt;, &lt;astropy.io.fits.hdu.compressed.CompImageHDU object at 0x7f1bd283fca0&gt;]</span>

<span class="sd">        Args:</span>
<span class="sd">            username (str, optional): splus.cloud username</span>
<span class="sd">            password (str, optional): splus.cloud pasword</span>
<span class="sd">        &quot;&quot;&quot;</span>        

        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
            <span class="n">username</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;splus.cloud username: &quot;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;splus.cloud password: &quot;</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span><span class="n">username</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span><span class="n">password</span><span class="p">}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/auth/login&quot;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">usr</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">usr</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="s1">&#39;Token &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">}</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/auth/collab&quot;</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">collab</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">collab</span><span class="p">[</span><span class="s1">&#39;collab&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">collab</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You have access to internal data&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">collab</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>


    <span class="k">def</span> <span class="nf">twelve_band_img</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">saturation</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="s2">&quot;R,I,F861,Z&quot;</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="s2">&quot;G,F515,F660&quot;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s2">&quot;U,F378,F395,F410,F430&quot;</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>        
        <span class="sd">&quot;&quot;&quot;Function to get twelve band composed images. </span>

<span class="sd">        Args:</span>
<span class="sd">            ra (float): RA coordinate in degrees. </span>
<span class="sd">            dec (float): DEC coordinate in degrees.</span>
<span class="sd">            radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">            noise (float, optional): Image noise value. Defaults to 0.15.</span>
<span class="sd">            saturation (float, optional): Image saturation value. Defaults to 0.15.    </span>
<span class="sd">            R (str, optional): Combinations of bands to compose red. Defaults to &quot;R,I,F861,Z&quot;.</span>
<span class="sd">            G (str, optional): Combinations of bands to compose green. Defaults to &quot;G,F515,F660&quot;.</span>
<span class="sd">            B (str, optional): Combinations of bands to compose blue. Defaults to &quot;U,F378,F395,F410,F430&quot;.</span>
<span class="sd">            option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">        Returns:</span>
<span class="sd">            PIL.Image: Image requested</span>
<span class="sd">        &quot;&quot;&quot;</span>             


        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_image/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">R</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">G</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">B</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">noise</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">saturation</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud&quot;</span> <span class="o">+</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">],</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;12img&#39;</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">get_img</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Q</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Function to get three band composed images made by lupton. </span>

<span class="sd">        Args:</span>
<span class="sd">            ra (float): RA coordinate in degrees. </span>
<span class="sd">            dec (float): DEC coordinate in degrees.</span>
<span class="sd">            radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">            R (str, optional): Band to compose red. Defaults to &quot;I&quot;.</span>
<span class="sd">            G (str, optional): Band to compose green. Defaults to &quot;R&quot;.</span>
<span class="sd">            B (str, optional): Band to compose blue. Defaults to &quot;G&quot;.</span>
<span class="sd">            stretch (int, optional): Stretch of image, same of make_lupton_rgb from astropy. Defaults to 3.</span>
<span class="sd">            Q (int, optional): Q of image, same of make_lupton_rgb from astropy. Defaults to 8.</span>
<span class="sd">            option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">        Returns:</span>
<span class="sd">            PIL.Image: Image requested</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_lupton_image/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">G</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">B</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">stretch</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Q</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud&quot;</span> <span class="o">+</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">],</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;get_cut&#39;</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">get_band_img</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get image composed with one band.</span>

<span class="sd">        Args:</span>
<span class="sd">            ra (float): RA coordinate in degrees. </span>
<span class="sd">            dec (float): DEC coordinate in degrees.</span>
<span class="sd">            radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">            band (str, optional): Band to compose image. Defaults to &#39;R&#39;.</span>
<span class="sd">            mode (str, optional): Mode. Defaults to &#39;linear&#39;.</span>
<span class="sd">            option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">        Returns:</span>
<span class="sd">            PIL.Image: Image requested</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_band_image/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud&quot;</span> <span class="o">+</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">],</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;get_band_image&#39;</span>
        <span class="k">return</span> <span class="n">image</span>


    <span class="k">def</span> <span class="nf">get_cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get fits cut.</span>

<span class="sd">        Args:</span>
<span class="sd">            ra (float): RA coordinate in degrees. </span>
<span class="sd">            dec (float): DEC coordinate in degrees.</span>
<span class="sd">            radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">            band (str): Band requested</span>
<span class="sd">            filepath (str, optional): file path to save result. Defaults to None.</span>
<span class="sd">            option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">        Returns:</span>
<span class="sd">            astropy.io.fits: Fits file with image. </span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">if</span> <span class="n">band</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ALL&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">filepath</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;You must save the file while getting &quot;all&quot; bands&#39;</span>

            <span class="k">elif</span> <span class="n">filepath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>  
                <span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span> <span class="o">+</span> <span class="s2">&quot;.tar.gz&quot;</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_cut/&quot;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="k">return</span> <span class="s1">&#39;File saved to &#39;</span> <span class="o">+</span> <span class="n">filepath</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_cut/&quot;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">hdu</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">filepath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">hdu</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="s2">&quot;.fz&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">hdu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;cut&#39;</span>
        <span class="k">return</span> <span class="n">hdu</span>

    <span class="k">def</span> <span class="nf">get_cut_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get weight image fits cut. </span>

<span class="sd">        Args:</span>
<span class="sd">            ra (float): RA coordinate in degrees. </span>
<span class="sd">            dec (float): DEC coordinate in degrees.</span>
<span class="sd">            radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">            band (str): Band requested</span>
<span class="sd">            filepath (str, optional): file path to save result. Defaults to None.</span>
<span class="sd">            option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">        Returns:</span>
<span class="sd">            astropy.io.fits: Fits file with image. </span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">if</span> <span class="n">band</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ALL&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">filepath</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;You must save the file while getting &quot;all&quot; bands&#39;</span>

            <span class="k">elif</span> <span class="n">filepath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>  
                <span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span> <span class="o">+</span> <span class="s2">&quot;.tar.gz&quot;</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_cut_weight/&quot;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="s2">&quot;ALL&quot;</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="k">return</span> <span class="s1">&#39;File saved to &#39;</span> <span class="o">+</span> <span class="n">filepath</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_cut_weight/&quot;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">hdu</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">filepath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">hdu</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="s2">&quot;.fz&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">hdu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;cut&#39;</span>
        <span class="k">return</span> <span class="n">hdu</span>

    <span class="k">def</span> <span class="nf">get_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get whole 11k field fits.</span>

<span class="sd">        Args:</span>
<span class="sd">            field (str): field name. </span>
<span class="sd">            band (str): Band.</span>

<span class="sd">        Returns:</span>
<span class="sd">            astropy.io.fits: Fits file with image. </span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_field/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">hdu</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;field&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">hdu</span>
        <span class="k">return</span> <span class="n">hdu</span>  

    <span class="k">def</span> <span class="nf">get_field_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get whole 11k weight field fits.</span>

<span class="sd">        Args:</span>
<span class="sd">            field (str): field name. </span>
<span class="sd">            band (str): Band.</span>

<span class="sd">        Returns:</span>
<span class="sd">            astropy.io.fits: Fits file with image. </span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_field_weight/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">hdu</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;field&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">hdu</span>
        <span class="k">return</span> <span class="n">hdu</span>  

    <span class="k">def</span> <span class="nf">get_tap_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get info about available tables.</span>
<span class="sd">        &quot;&quot;&quot;</span>        

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tables and columns available at https://splus.cloud/query/&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">table_upload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">publicdata</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Perform async queries on splus cloud TAP service. </span>

<span class="sd">        Args:</span>
<span class="sd">            query (str): query itself.</span>
<span class="sd">            table_upload (pandas.DataFrame, optional): table to upload. Defaults to None.</span>
<span class="sd">            publicdata (bool, optional): If internal wants to access public data. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            astropy.table.Table: result table.</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collab</span><span class="p">:</span>
            <span class="n">baselink</span> <span class="o">=</span> <span class="s2">&quot;https://splus.cloud/tap/tap/async/&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">baselink</span> <span class="o">=</span> <span class="s2">&quot;https://splus.cloud/public-TAP/tap/async/&quot;</span>


        <span class="k">if</span> <span class="n">publicdata</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">collab</span><span class="p">:</span>
            <span class="n">baselink</span> <span class="o">=</span> <span class="s2">&quot;https://splus.cloud/public-TAP/tap/async/&quot;</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="s1">&#39;doQuery&#39;</span><span class="p">,</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s1">&#39;1.0&#39;</span><span class="p">,</span>
            <span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="s1">&#39;ADQL&#39;</span><span class="p">,</span>
            <span class="s2">&quot;phase&quot;</span><span class="p">:</span> <span class="s1">&#39;run&#39;</span><span class="p">,</span>
            <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s1">&#39;fits&#39;</span>
        <span class="p">}</span>


        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">table_upload</span><span class="p">))</span> <span class="o">!=</span> <span class="s2">&quot;&lt;class &#39;NoneType&#39;&gt;&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;astropy.table&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6000</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cutting to the first 6000 objects!&#39;</span><span class="p">)</span>
                    <span class="n">table_upload</span> <span class="o">=</span> <span class="n">table_upload</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6000</span><span class="p">]</span>
                    <span class="n">table_upload</span> <span class="o">=</span> <span class="n">from_table</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>

                    <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>

                    <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">table_upload</span> <span class="o">=</span> <span class="n">from_table</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>

                    <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>

                    <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

            <span class="k">elif</span> <span class="s1">&#39;astropy.io.votable&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">table_upload</span><span class="o">.</span><span class="n">get_first_table</span><span class="p">()</span><span class="o">.</span><span class="n">nrows</span> <span class="o">&gt;</span> <span class="mi">6000</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;votable bigger than 6000&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>
                    <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

            <span class="k">elif</span> <span class="s1">&#39;DataFrame&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6000</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cutting to the first 6000 objects!&#39;</span><span class="p">)</span>
                    <span class="n">table_upload</span> <span class="o">=</span> <span class="n">table_upload</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6000</span><span class="p">]</span>
                    <span class="n">table_upload</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>
                    <span class="n">table_upload</span> <span class="o">=</span> <span class="n">from_table</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>
                    <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>
                    <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">table_upload</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>
                    <span class="n">table_upload</span> <span class="o">=</span> <span class="n">from_table</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>
                    <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>
                    <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;Table type not supported&#39;</span>

            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;upload&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;upload,param:uplTable&#39;</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">baselink</span> <span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;uplTable&#39;</span><span class="p">:</span> <span class="n">IObytes</span><span class="o">.</span><span class="n">read</span><span class="p">()})</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">table_upload</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">baselink</span> <span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="n">xmldoc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;phase&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">process</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span>

            <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;jobId&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">jobID</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span>

            <span class="k">while</span> <span class="n">process</span> <span class="o">==</span> <span class="s1">&#39;EXECUTING&#39;</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">baselink</span> <span class="o">+</span> <span class="n">jobID</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
                <span class="n">xmldoc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

                <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;phase&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">process</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">process</span> <span class="o">==</span> <span class="s1">&#39;COMPLETED&#39;</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;result&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">link</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;xlink:href&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>

                <span class="n">link</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;http://192.168.10.23:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;https://splus.cloud&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;http://10.180.0.209:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;https://splus.cloud&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;http://10.180.0.207:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;https://splus.cloud&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;http://10.180.0.219:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;https://splus.cloud&quot;</span><span class="p">)</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;query&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;finished&#39;</span><span class="p">)</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span>

            <span class="k">if</span> <span class="n">process</span> <span class="o">==</span> <span class="s1">&#39;ERROR&#39;</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span>

                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: &quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;: &quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">checkcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if coords are in footprint</span>

<span class="sd">        Args:</span>
<span class="sd">            ra (float): RA coordinate in degrees. </span>
<span class="sd">            dec (float): DEC coordinate in degrees.</span>
<span class="sd">        Returns:</span>
<span class="sd">            dict: result.</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/whichdr/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>


    <span class="k">def</span> <span class="nf">get_last_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If you missed to save your last query or image into a variable, you may get it here.</span>

<span class="sd">        Returns:</span>
<span class="sd">            _type_: Last result, may be image or query. </span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Class may be initialized with splus.cloud user and password. If left in blanck, user and password will be asked on the runtime. 
Once logged in you may use all main tools from this class.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">splusdata</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;spcloud_user&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">)</span>
<span class="go">You&#39;re connected.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span><span class="o">.</span><span class="n">get_cut</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">)</span>
<span class="go">[&lt;astropy.io.fits.hdu.image.PrimaryHDU object at 0x7f1bd283fe80&gt;, &lt;astropy.io.fits.hdu.compressed.CompImageHDU object at 0x7f1bd283fca0&gt;]</span>
</code></pre></div>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>username</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>splus.cloud username</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>password</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>splus.cloud pasword</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class may be initialized with splus.cloud user and password. If left in blanck, user and password will be asked on the runtime. </span>
<span class="sd">    Once logged in you may use all main tools from this class.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; conn = splusdata.connect(&#39;spcloud_user&#39;, &#39;password&#39;)</span>
<span class="sd">        You&#39;re connected.</span>
<span class="sd">        &gt;&gt;&gt; conn.get_cut(ra=0.1, dec=0.1, radius=100, band=&#39;R&#39;)</span>
<span class="sd">        [&lt;astropy.io.fits.hdu.image.PrimaryHDU object at 0x7f1bd283fe80&gt;, &lt;astropy.io.fits.hdu.compressed.CompImageHDU object at 0x7f1bd283fca0&gt;]</span>

<span class="sd">    Args:</span>
<span class="sd">        username (str, optional): splus.cloud username</span>
<span class="sd">        password (str, optional): splus.cloud pasword</span>
<span class="sd">    &quot;&quot;&quot;</span>        

    <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
        <span class="n">username</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;splus.cloud username: &quot;</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;splus.cloud password: &quot;</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span><span class="n">username</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span><span class="n">password</span><span class="p">}</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/auth/login&quot;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">usr</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">usr</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="s1">&#39;Token &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">}</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/auth/collab&quot;</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">collab</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collab</span><span class="p">[</span><span class="s1">&#39;collab&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collab</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You have access to internal data&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collab</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">pass</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.checkcoords" class="doc doc-heading">
<code class="highlight language-python"><span class="n">checkcoords</span><span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check if coords are in footprint</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ra</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>RA coordinate in degrees. </p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>DEC coordinate in degrees.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>dict</code></td>          <td>
          </td>
          <td><p>result.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">checkcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if coords are in footprint</span>

<span class="sd">    Args:</span>
<span class="sd">        ra (float): RA coordinate in degrees. </span>
<span class="sd">        dec (float): DEC coordinate in degrees.</span>
<span class="sd">    Returns:</span>
<span class="sd">        dict: result.</span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/whichdr/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.get_band_img" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_band_img</span><span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get image composed with one band.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ra</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>RA coordinate in degrees. </p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>DEC coordinate in degrees.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>radius</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Image size in pixels. Final size will be (radius X radius)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>band</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Band to compose image. Defaults to 'R'.</p></td>
          <td>
                <code>&#39;R&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>mode</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Mode. Defaults to 'linear'.</p></td>
          <td>
                <code>&#39;linear&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>option</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>in case a coordinate overlap over two fields, use option = 2 if you want the second field.</p></td>
          <td>
                <code>1</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>PIL.Image: Image requested</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_band_img</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get image composed with one band.</span>

<span class="sd">    Args:</span>
<span class="sd">        ra (float): RA coordinate in degrees. </span>
<span class="sd">        dec (float): DEC coordinate in degrees.</span>
<span class="sd">        radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">        band (str, optional): Band to compose image. Defaults to &#39;R&#39;.</span>
<span class="sd">        mode (str, optional): Mode. Defaults to &#39;linear&#39;.</span>
<span class="sd">        option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">    Returns:</span>
<span class="sd">        PIL.Image: Image requested</span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_band_image/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud&quot;</span> <span class="o">+</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">],</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">image</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;get_band_image&#39;</span>
    <span class="k">return</span> <span class="n">image</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.get_cut" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_cut</span><span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get fits cut.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ra</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>RA coordinate in degrees. </p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>DEC coordinate in degrees.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>radius</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Image size in pixels. Final size will be (radius X radius)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>band</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Band requested</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>filepath</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>file path to save result. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>option</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>in case a coordinate overlap over two fields, use option = 2 if you want the second field.</p></td>
          <td>
                <code>1</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>astropy.io.fits: Fits file with image.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get fits cut.</span>

<span class="sd">    Args:</span>
<span class="sd">        ra (float): RA coordinate in degrees. </span>
<span class="sd">        dec (float): DEC coordinate in degrees.</span>
<span class="sd">        radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">        band (str): Band requested</span>
<span class="sd">        filepath (str, optional): file path to save result. Defaults to None.</span>
<span class="sd">        option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">    Returns:</span>
<span class="sd">        astropy.io.fits: Fits file with image. </span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="k">if</span> <span class="n">band</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ALL&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filepath</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;You must save the file while getting &quot;all&quot; bands&#39;</span>

        <span class="k">elif</span> <span class="n">filepath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>  
            <span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span> <span class="o">+</span> <span class="s2">&quot;.tar.gz&quot;</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_cut/&quot;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">return</span> <span class="s1">&#39;File saved to &#39;</span> <span class="o">+</span> <span class="n">filepath</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_cut/&quot;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">hdu</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">filepath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">hdu</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="s2">&quot;.fz&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">hdu</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;cut&#39;</span>
    <span class="k">return</span> <span class="n">hdu</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.get_cut_weight" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_cut_weight</span><span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get weight image fits cut. </p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ra</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>RA coordinate in degrees. </p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>DEC coordinate in degrees.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>radius</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Image size in pixels. Final size will be (radius X radius)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>band</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Band requested</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>filepath</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>file path to save result. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>option</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>in case a coordinate overlap over two fields, use option = 2 if you want the second field.</p></td>
          <td>
                <code>1</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>astropy.io.fits: Fits file with image.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_cut_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">band</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get weight image fits cut. </span>

<span class="sd">    Args:</span>
<span class="sd">        ra (float): RA coordinate in degrees. </span>
<span class="sd">        dec (float): DEC coordinate in degrees.</span>
<span class="sd">        radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">        band (str): Band requested</span>
<span class="sd">        filepath (str, optional): file path to save result. Defaults to None.</span>
<span class="sd">        option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">    Returns:</span>
<span class="sd">        astropy.io.fits: Fits file with image. </span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="k">if</span> <span class="n">band</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ALL&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filepath</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;You must save the file while getting &quot;all&quot; bands&#39;</span>

        <span class="k">elif</span> <span class="n">filepath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>  
            <span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span> <span class="o">+</span> <span class="s2">&quot;.tar.gz&quot;</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_cut_weight/&quot;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="s2">&quot;ALL&quot;</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">return</span> <span class="s1">&#39;File saved to &#39;</span> <span class="o">+</span> <span class="n">filepath</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_cut_weight/&quot;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">hdu</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">filepath</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">hdu</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="s2">&quot;.fz&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">hdu</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;cut&#39;</span>
    <span class="k">return</span> <span class="n">hdu</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.get_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">band</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get whole 11k field fits.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>field</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>field name. </p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>band</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Band.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>astropy.io.fits: Fits file with image.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get whole 11k field fits.</span>

<span class="sd">    Args:</span>
<span class="sd">        field (str): field name. </span>
<span class="sd">        band (str): Band.</span>

<span class="sd">    Returns:</span>
<span class="sd">        astropy.io.fits: Fits file with image. </span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_field/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">hdu</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;field&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">hdu</span>
    <span class="k">return</span> <span class="n">hdu</span>  
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.get_field_weight" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_weight</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">band</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get whole 11k weight field fits.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>field</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>field name. </p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>band</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Band.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>astropy.io.fits: Fits file with image.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_field_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get whole 11k weight field fits.</span>

<span class="sd">    Args:</span>
<span class="sd">        field (str): field name. </span>
<span class="sd">        band (str): Band.</span>

<span class="sd">    Returns:</span>
<span class="sd">        astropy.io.fits: Fits file with image. </span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_direct_field_weight/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="p">)</span> <span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">hdu</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;field&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">hdu</span>
    <span class="k">return</span> <span class="n">hdu</span>  
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.get_img" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_img</span><span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Q</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Function to get three band composed images made by lupton. </p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ra</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>RA coordinate in degrees. </p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>DEC coordinate in degrees.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>radius</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Image size in pixels. Final size will be (radius X radius)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>R</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Band to compose red. Defaults to "I".</p></td>
          <td>
                <code>&#39;I&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>G</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Band to compose green. Defaults to "R".</p></td>
          <td>
                <code>&#39;R&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>B</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Band to compose blue. Defaults to "G".</p></td>
          <td>
                <code>&#39;G&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>stretch</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Stretch of image, same of make_lupton_rgb from astropy. Defaults to 3.</p></td>
          <td>
                <code>3</code>
          </td>
        </tr>
        <tr>
          <td><code>Q</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Q of image, same of make_lupton_rgb from astropy. Defaults to 8.</p></td>
          <td>
                <code>8</code>
          </td>
        </tr>
        <tr>
          <td><code>option</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>in case a coordinate overlap over two fields, use option = 2 if you want the second field.</p></td>
          <td>
                <code>1</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>PIL.Image: Image requested</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_img</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Q</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to get three band composed images made by lupton. </span>

<span class="sd">    Args:</span>
<span class="sd">        ra (float): RA coordinate in degrees. </span>
<span class="sd">        dec (float): DEC coordinate in degrees.</span>
<span class="sd">        radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">        R (str, optional): Band to compose red. Defaults to &quot;I&quot;.</span>
<span class="sd">        G (str, optional): Band to compose green. Defaults to &quot;R&quot;.</span>
<span class="sd">        B (str, optional): Band to compose blue. Defaults to &quot;G&quot;.</span>
<span class="sd">        stretch (int, optional): Stretch of image, same of make_lupton_rgb from astropy. Defaults to 3.</span>
<span class="sd">        Q (int, optional): Q of image, same of make_lupton_rgb from astropy. Defaults to 8.</span>
<span class="sd">        option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">    Returns:</span>
<span class="sd">        PIL.Image: Image requested</span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_lupton_image/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">G</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">B</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">stretch</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">Q</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud&quot;</span> <span class="o">+</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">],</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">image</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;get_cut&#39;</span>
    <span class="k">return</span> <span class="n">image</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.get_last_result" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_last_result</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>If you missed to save your last query or image into a variable, you may get it here.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>_type_</code></td>          <td>
          </td>
          <td><p>Last result, may be image or query.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_last_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;If you missed to save your last query or image into a variable, you may get it here.</span>

<span class="sd">    Returns:</span>
<span class="sd">        _type_: Last result, may be image or query. </span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.get_tap_tables" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_tap_tables</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get info about available tables.</p>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_tap_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get info about available tables.</span>
<span class="sd">    &quot;&quot;&quot;</span>        

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tables and columns available at https://splus.cloud/query/&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.query" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">table_upload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">publicdata</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Perform async queries on splus cloud TAP service. </p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>query</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>query itself.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>table_upload</code></td>
          <td>
                <code>pandas.<span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td><p>table to upload. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>publicdata</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>If internal wants to access public data. Defaults to None.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>astropy.table.Table: result table.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">table_upload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">publicdata</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Perform async queries on splus cloud TAP service. </span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): query itself.</span>
<span class="sd">        table_upload (pandas.DataFrame, optional): table to upload. Defaults to None.</span>
<span class="sd">        publicdata (bool, optional): If internal wants to access public data. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        astropy.table.Table: result table.</span>
<span class="sd">    &quot;&quot;&quot;</span>        
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collab</span><span class="p">:</span>
        <span class="n">baselink</span> <span class="o">=</span> <span class="s2">&quot;https://splus.cloud/tap/tap/async/&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">baselink</span> <span class="o">=</span> <span class="s2">&quot;https://splus.cloud/public-TAP/tap/async/&quot;</span>


    <span class="k">if</span> <span class="n">publicdata</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">collab</span><span class="p">:</span>
        <span class="n">baselink</span> <span class="o">=</span> <span class="s2">&quot;https://splus.cloud/public-TAP/tap/async/&quot;</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="s1">&#39;doQuery&#39;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s1">&#39;1.0&#39;</span><span class="p">,</span>
        <span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="s1">&#39;ADQL&#39;</span><span class="p">,</span>
        <span class="s2">&quot;phase&quot;</span><span class="p">:</span> <span class="s1">&#39;run&#39;</span><span class="p">,</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s1">&#39;fits&#39;</span>
    <span class="p">}</span>


    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">table_upload</span><span class="p">))</span> <span class="o">!=</span> <span class="s2">&quot;&lt;class &#39;NoneType&#39;&gt;&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;astropy.table&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6000</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cutting to the first 6000 objects!&#39;</span><span class="p">)</span>
                <span class="n">table_upload</span> <span class="o">=</span> <span class="n">table_upload</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6000</span><span class="p">]</span>
                <span class="n">table_upload</span> <span class="o">=</span> <span class="n">from_table</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>

                <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>

                <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table_upload</span> <span class="o">=</span> <span class="n">from_table</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>

                <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>

                <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">elif</span> <span class="s1">&#39;astropy.io.votable&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">table_upload</span><span class="o">.</span><span class="n">get_first_table</span><span class="p">()</span><span class="o">.</span><span class="n">nrows</span> <span class="o">&gt;</span> <span class="mi">6000</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;votable bigger than 6000&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>
                <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">elif</span> <span class="s1">&#39;DataFrame&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6000</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cutting to the first 6000 objects!&#39;</span><span class="p">)</span>
                <span class="n">table_upload</span> <span class="o">=</span> <span class="n">table_upload</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6000</span><span class="p">]</span>
                <span class="n">table_upload</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>
                <span class="n">table_upload</span> <span class="o">=</span> <span class="n">from_table</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>
                <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>
                <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table_upload</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>
                <span class="n">table_upload</span> <span class="o">=</span> <span class="n">from_table</span><span class="p">(</span><span class="n">table_upload</span><span class="p">)</span>
                <span class="n">IObytes</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
                <span class="n">writeto</span><span class="p">(</span><span class="n">table_upload</span><span class="p">,</span> <span class="n">IObytes</span><span class="p">)</span>
                <span class="n">IObytes</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Table type not supported&#39;</span>

        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;upload&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;upload,param:uplTable&#39;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">baselink</span> <span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;uplTable&#39;</span><span class="p">:</span> <span class="n">IObytes</span><span class="o">.</span><span class="n">read</span><span class="p">()})</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">table_upload</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">baselink</span> <span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">xmldoc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;phase&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">process</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;jobId&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">jobID</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span>

        <span class="k">while</span> <span class="n">process</span> <span class="o">==</span> <span class="s1">&#39;EXECUTING&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">baselink</span> <span class="o">+</span> <span class="n">jobID</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
            <span class="n">xmldoc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

            <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;phase&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">process</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">process</span> <span class="o">==</span> <span class="s1">&#39;COMPLETED&#39;</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;result&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;xlink:href&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>

            <span class="n">link</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;http://192.168.10.23:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;https://splus.cloud&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;http://10.180.0.209:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;https://splus.cloud&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;http://10.180.0.207:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;https://splus.cloud&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;http://10.180.0.219:8080&quot;</span><span class="p">,</span> <span class="s2">&quot;https://splus.cloud&quot;</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;query&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;finished&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span>

        <span class="k">if</span> <span class="n">process</span> <span class="o">==</span> <span class="s1">&#39;ERROR&#39;</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span>

            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: &quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;: &quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="splusdata.connect.connect.twelve_band_img" class="doc doc-heading">
<code class="highlight language-python"><span class="n">twelve_band_img</span><span class="p">(</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">saturation</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="s1">&#39;R,I,F861,Z&#39;</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="s1">&#39;G,F515,F660&#39;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s1">&#39;U,F378,F395,F410,F430&#39;</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Function to get twelve band composed images. </p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ra</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>RA coordinate in degrees. </p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dec</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>DEC coordinate in degrees.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>radius</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Image size in pixels. Final size will be (radius X radius)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>noise</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Image noise value. Defaults to 0.15.</p></td>
          <td>
                <code>0.15</code>
          </td>
        </tr>
        <tr>
          <td><code>saturation</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Image saturation value. Defaults to 0.15.    </p></td>
          <td>
                <code>0.15</code>
          </td>
        </tr>
        <tr>
          <td><code>R</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Combinations of bands to compose red. Defaults to "R,I,F861,Z".</p></td>
          <td>
                <code>&#39;R,I,F861,Z&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>G</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Combinations of bands to compose green. Defaults to "G,F515,F660".</p></td>
          <td>
                <code>&#39;G,F515,F660&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>B</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Combinations of bands to compose blue. Defaults to "U,F378,F395,F410,F430".</p></td>
          <td>
                <code>&#39;U,F378,F395,F410,F430&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>option</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>in case a coordinate overlap over two fields, use option = 2 if you want the second field.</p></td>
          <td>
                <code>1</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>PIL.Image: Image requested</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>splusdata/connect.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">twelve_band_img</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">saturation</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">R</span><span class="o">=</span><span class="s2">&quot;R,I,F861,Z&quot;</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="s2">&quot;G,F515,F660&quot;</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="s2">&quot;U,F378,F395,F410,F430&quot;</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>        
    <span class="sd">&quot;&quot;&quot;Function to get twelve band composed images. </span>

<span class="sd">    Args:</span>
<span class="sd">        ra (float): RA coordinate in degrees. </span>
<span class="sd">        dec (float): DEC coordinate in degrees.</span>
<span class="sd">        radius (int): Image size in pixels. Final size will be (radius X radius)</span>
<span class="sd">        noise (float, optional): Image noise value. Defaults to 0.15.</span>
<span class="sd">        saturation (float, optional): Image saturation value. Defaults to 0.15.    </span>
<span class="sd">        R (str, optional): Combinations of bands to compose red. Defaults to &quot;R,I,F861,Z&quot;.</span>
<span class="sd">        G (str, optional): Combinations of bands to compose green. Defaults to &quot;G,F515,F660&quot;.</span>
<span class="sd">        B (str, optional): Combinations of bands to compose blue. Defaults to &quot;U,F378,F395,F410,F430&quot;.</span>
<span class="sd">        option (str, optional): in case a coordinate overlap over two fields, use option = 2 if you want the second field.</span>
<span class="sd">    Returns:</span>
<span class="sd">        PIL.Image: Image requested</span>
<span class="sd">    &quot;&quot;&quot;</span>             


    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud/api/get_image/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">R</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">G</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">B</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">noise</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">saturation</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">option</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://splus.cloud&quot;</span> <span class="o">+</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">],</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastcontent</span> <span class="o">=</span> <span class="n">image</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lastres</span> <span class="o">=</span> <span class="s1">&#39;12img&#39;</span>
    <span class="k">return</span> <span class="n">image</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../examples/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Examples" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Examples
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>